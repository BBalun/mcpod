// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ephemeris {
  starId Int      @id
  epoch  Decimal?
  period Decimal?
}

model Catalog {
  id Int @id @default(autoincrement())

  starId      Int
  julianDate  Decimal
  magnitude   Decimal?
  magErr      Decimal?
  filter      String
  referenceId String

  @@index([starId])
  @@index([referenceId])
}

model Observation {
  id Int @id @default(autoincrement())

  starId      Int
  filter      String
  referenceId String
  count       Int    @default(0)

  lambdaEff    Decimal?
  magAverage   Decimal?
  magError     Decimal?
  stdError     Decimal?
  amplitudeEff Decimal?

  // @@unique([starId, filter, referenceId])
  @@index([starId, referenceId])
}

model Reference {
  id Int @id @default(autoincrement())

  referenceId String
  starId      Int

  author           String?
  bibcode          String?
  referenceStarIds String?

  // details String @default("") // TODO: is it required or will it be calculated on a fly

  @@unique([referenceId, starId])
}

model Identifier {
  starId Int     @id
  mainId String
  tyc    String?
  hip    String?

  @@index([tyc])
  @@index([hip])
}

// model ExternalData {
//   id Int @id @default(autoincrement())

//   starId      Int
//   julianDate  Decimal
//   magnitude   Decimal?
//   magErr      Decimal?
//   filter      String
//   referenceId String

//   @@index([starId])
//   @@index([referenceId])
// }
